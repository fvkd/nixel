ID "import" (1, 1)
PATH "./make-test-python.nix" (1, 8)
PATH_END " " (1, 30)
( "(" (1, 31)
{ "{" (1, 32)
ID "lib" (1, 34)
, "," (1, 37)
ID "pkgs" (1, 39)
, "," (1, 43)
ELLIPSIS "..." (1, 45)
} "}" (1, 49)
: ":" (1, 50)
{ "{" (1, 52)
ID "name" (2, 3)
= "=" (2, 8)
" "\"" (2, 10)
STR "systemd-initrd-simple" (2, 11)
" "\"" (2, 32)
; ";" (2, 33)
ID "machine" (4, 3)
= "=" (4, 11)
{ "{" (4, 13)
ID "pkgs" (4, 15)
, "," (4, 19)
ELLIPSIS "..." (4, 21)
} "}" (4, 25)
: ":" (4, 26)
{ "{" (4, 28)
ID "boot" (5, 5)
. "." (5, 9)
ID "initrd" (5, 10)
. "." (5, 16)
ID "systemd" (5, 17)
= "=" (5, 25)
{ "{" (5, 27)
ID "enable" (6, 7)
= "=" (6, 14)
ID "true" (6, 16)
; ";" (6, 20)
ID "emergencyAccess" (7, 7)
= "=" (7, 23)
ID "true" (7, 25)
; ";" (7, 29)
} "}" (8, 5)
; ";" (8, 6)
ID "fileSystems" (9, 5)
= "=" (9, 17)
ID "lib" (9, 19)
. "." (9, 22)
ID "mkVMOverride" (9, 23)
{ "{" (9, 36)
" "\"" (10, 7)
STR "/" (10, 8)
" "\"" (10, 9)
. "." (10, 10)
ID "autoResize" (10, 11)
= "=" (10, 22)
ID "true" (10, 24)
; ";" (10, 28)
} "}" (11, 5)
; ";" (11, 6)
} "}" (12, 3)
; ";" (12, 4)
ID "testScript" (14, 3)
= "=" (14, 14)
IND_STRING_OPEN "''\n" (14, 16)
IND_STR "    import subprocess\n\n    oldAvail = machine.succeed(\"df --output=avail / | sed 1d\")\n    machine.shutdown()\n\n    subprocess.check_call([\"qemu-img\", \"resize\", \"vm-state-machine/machine.qcow2\", \"+1G\"])\n\n    machine.start()\n    newAvail = machine.succeed(\"df --output=avail / | sed 1d\")\n\n    assert int(oldAvail) < int(newAvail), \"File system did not grow\"\n  " (15, 1)
IND_STRING_CLOSE "''" (26, 3)
; ";" (26, 5)
} "}" (27, 1)
) ")" (27, 2)