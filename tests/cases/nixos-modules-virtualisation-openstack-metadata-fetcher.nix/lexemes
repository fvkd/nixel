{ "{" (1, 1)
ID "targetRoot" (1, 3)
, "," (1, 13)
ID "wgetExtraOptions" (1, 15)
} "}" (1, 32)
: ":" (1, 33)
IND_STRING_OPEN "''\n" (6, 1)
IND_STR "  metaDir=" (7, 1)
DOLLAR_CURLY "${" (7, 11)
ID "targetRoot" (7, 13)
} "}" (7, 23)
IND_STR "etc/ec2-metadata\n  mkdir -m 0755 -p \"$metaDir\"\n  rm -f \"$metaDir/*\"\n\n  echo \"getting instance metadata...\"\n\n  wget_imds() {\n    wget " (7, 24)
DOLLAR_CURLY "${" (14, 10)
ID "wgetExtraOptions" (14, 12)
} "}" (14, 28)
IND_STR " \"$@\"\n  }\n\n  wget_imds -O \"$metaDir/ami-manifest-path\" http://169.254.169.254/1.0/meta-data/ami-manifest-path\n  # When no user-data is provided, the OpenStack metadata server doesn't expose the user-data route.\n  (umask 077 && wget_imds -O \"$metaDir/user-data\" http://169.254.169.254/1.0/user-data || rm -f \"$metaDir/user-data\")\n  wget_imds -O \"$metaDir/hostname\" http://169.254.169.254/1.0/meta-data/hostname\n  wget_imds -O \"$metaDir/public-keys-0-openssh-key\" http://169.254.169.254/1.0/meta-data/public-keys/0/openssh-key\n" (14, 29)
IND_STRING_CLOSE "''" (22, 1)