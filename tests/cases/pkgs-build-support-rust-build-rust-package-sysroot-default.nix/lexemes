{ "{" (1, 1)
ID "stdenv" (1, 3)
, "," (1, 9)
ID "rust" (1, 11)
, "," (1, 15)
ID "rustPlatform" (1, 17)
, "," (1, 29)
ID "buildPackages" (1, 31)
} "}" (1, 45)
: ":" (1, 46)
{ "{" (3, 1)
ID "shortTarget" (3, 3)
, "," (3, 14)
ID "originalCargoToml" (3, 16)
, "," (3, 33)
ID "target" (3, 35)
, "," (3, 41)
ID "RUSTFLAGS" (3, 43)
} "}" (3, 53)
: ":" (3, 54)
LET "let" (5, 1)
ID "cargoSrc" (6, 3)
= "=" (6, 12)
ID "import" (6, 14)
PATH "../../sysroot/src.nix" (6, 21)
PATH_END " " (6, 42)
{ "{" (6, 43)
INHERIT "inherit" (7, 5)
ID "stdenv" (7, 13)
ID "rustPlatform" (7, 20)
ID "buildPackages" (7, 33)
ID "originalCargoToml" (7, 47)
; ";" (7, 64)
} "}" (8, 3)
; ";" (8, 4)
IN "in" (9, 1)
ID "rustPlatform" (9, 4)
. "." (9, 16)
ID "buildRustPackage" (9, 17)
{ "{" (9, 34)
INHERIT "inherit" (10, 3)
ID "target" (10, 11)
ID "RUSTFLAGS" (10, 18)
; ";" (10, 27)
ID "name" (12, 3)
= "=" (12, 8)
" "\"" (12, 10)
STR "custom-sysroot" (12, 11)
" "\"" (12, 25)
; ";" (12, 26)
ID "src" (13, 3)
= "=" (13, 7)
ID "cargoSrc" (13, 10)
; ";" (13, 18)
ID "RUSTC_BOOTSTRAP" (15, 3)
= "=" (15, 19)
INT "1" (15, 21)
; ";" (15, 22)
ID "__internal_dontAddSysroot" (16, 3)
= "=" (16, 29)
ID "true" (16, 31)
; ";" (16, 35)
ID "cargoSha256" (17, 3)
= "=" (17, 15)
" "\"" (17, 17)
STR "0y6dqfhsgk00y3fv5bnjzk0s7i30nwqc1rp0xlrk83hkh80x81mw" (17, 18)
" "\"" (17, 70)
; ";" (17, 71)
ID "doCheck" (19, 3)
= "=" (19, 11)
ID "false" (19, 13)
; ";" (19, 18)
ID "installPhase" (21, 3)
= "=" (21, 16)
IND_STRING_OPEN "''\n" (21, 18)
IND_STR "    export LIBS_DIR=$out/lib/rustlib/" (22, 1)
DOLLAR_CURLY "${" (22, 38)
ID "shortTarget" (22, 40)
} "}" (22, 51)
IND_STR "/lib\n    mkdir -p $LIBS_DIR\n    for f in target/" (22, 52)
DOLLAR_CURLY "${" (24, 21)
ID "shortTarget" (24, 23)
} "}" (24, 34)
IND_STR "/release/deps/*.{rlib,rmeta}; do\n      cp $f $LIBS_DIR\n    done\n\n    export RUST_SYSROOT=$(rustc --print=sysroot)\n    host=" (24, 35)
DOLLAR_CURLY "${" (29, 10)
ID "rust" (29, 12)
. "." (29, 16)
ID "toRustTarget" (29, 17)
ID "stdenv" (29, 30)
. "." (29, 36)
ID "buildPlatform" (29, 37)
} "}" (29, 50)
IND_STR "\n    cp -r $RUST_SYSROOT/lib/rustlib/$host $out\n  " (29, 51)
IND_STRING_CLOSE "''" (31, 3)
; ";" (31, 5)
} "}" (32, 1)